/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/@tiptap/extension-code-block@2.0.0-beta.220/dist/index.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@tiptap/core"),require("@tiptap/pm/state")):"function"==typeof define&&define.amd?define(["exports","@tiptap/core","@tiptap/pm/state"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@tiptap/extension-code-block"]={},e.core,e.state)}(this,(function(e,t,n){"use strict";const r=/^```([a-z]+)?[\s\n]$/,o=/^~~~([a-z]+)?[\s\n]$/,a=t.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,r=[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter((e=>e.startsWith(n))).map((e=>e.replace(n,"")))[0];return r||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:n}){return["pre",t.mergeAttributes(this.options.HTMLAttributes,n),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith("\n\n");return!(!a||!i)&&e.chain().command((({tr:e})=>(e.delete(r.pos-2,r.pos),!0))).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:o,empty:a}=n;if(!a||o.parent.type!==this.type)return!1;if(!(o.parentOffset===o.parent.nodeSize-2))return!1;const i=o.after();if(void 0===i)return!1;return!r.nodeAt(i)&&e.commands.exitCode()}}},addInputRules(){return[t.textblockTypeInputRule({find:r,type:this.type,getAttributes:e=>({language:e[1]})}),t.textblockTypeInputRule({find:o,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new n.Plugin({key:new n.PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const r=t.clipboardData.getData("text/plain"),o=t.clipboardData.getData("vscode-editor-data"),a=o?JSON.parse(o):void 0,i=null==a?void 0:a.mode;if(!r||!i)return!1;const{tr:s}=e.state;return s.replaceSelectionWith(this.type.create({language:i})),s.setSelection(n.TextSelection.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(r.replace(/\r\n?/g,"\n")),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}});e.CodeBlock=a,e.backtickInputRegex=r,e.default=a,e.tildeInputRegex=o,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=/sm/decb2098904bf737820934ceeee8d70b57659a55d37f57e7740a6eb03cd787b4.map