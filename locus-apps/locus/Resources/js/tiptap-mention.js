/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/@tiptap/extension-mention@2.0.0-beta.220/dist/index.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@tiptap/core"),require("@tiptap/pm/state"),require("@tiptap/suggestion")):"function"==typeof define&&define.amd?define(["exports","@tiptap/core","@tiptap/pm/state","@tiptap/suggestion"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["@tiptap/extension-mention"]={},t.core,t.state,t.Suggestion)}(this,(function(t,e,n,o){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=i(o);const s=new n.PluginKey("mention"),a=e.Node.create({name:"mention",addOptions(){return{HTMLAttributes:{},renderLabel({options:t,node:e}){var n;return`${t.suggestion.char}${null!==(n=e.attrs.label)&&void 0!==n?n:e.attrs.id}`},suggestion:{char:"@",pluginKey:s,command:({editor:t,range:e,props:n})=>{var o,i;const r=t.view.state.selection.$to.nodeAfter;(null===(o=null==r?void 0:r.text)||void 0===o?void 0:o.startsWith(" "))&&(e.to+=1),t.chain().focus().insertContentAt(e,[{type:this.name,attrs:n},{type:"text",text:" "}]).run(),null===(i=window.getSelection())||void 0===i||i.collapseToEnd()},allow:({state:t,range:e})=>{const n=t.doc.resolve(e.from),o=t.schema.nodes[this.name];return!!n.parent.type.contentMatch.matchType(o)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:t=>t.getAttribute("data-id"),renderHTML:t=>t.id?{"data-id":t.id}:{}},label:{default:null,parseHTML:t=>t.getAttribute("data-label"),renderHTML:t=>t.label?{"data-label":t.label}:{}}}),parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:t,HTMLAttributes:n}){return["span",e.mergeAttributes({"data-type":this.name},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText({node:t}){return this.options.renderLabel({options:this.options,node:t})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command((({tr:t,state:e})=>{let n=!1;const{selection:o}=e,{empty:i,anchor:r}=o;return!!i&&(e.doc.nodesBetween(r-1,r,((e,o)=>{if(e.type.name===this.name)return n=!0,t.insertText(this.options.suggestion.char||"",o,o+e.nodeSize),!1})),n)}))}},addProseMirrorPlugins(){return[r.default({editor:this.editor,...this.options.suggestion})]}});t.Mention=a,t.MentionPluginKey=s,t.default=a,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=/sm/b7d33129069b01824ddf77a8299028de558691c1c627929ea67cc7939a0a9936.map